#!/usr/bin/env bash

#
# This script runs screenshot tests for all posts.
#
# Usage:
#   ./runScreenshotTests [target_paths]
#
# If no target path is provided, the script will run tests for all valid target
# paths.
#

set -e

bold_green='\033[1;32m'
default_color='\033[0m'

viewport_widths=(375 1024)

if [ $# -eq 0 ]
then
    num_posts=$(ls src/posts/*.vue | wc -l)
    target_paths=("" $(seq 1 $num_posts))
else
    target_paths=("$@")
fi

for target_path in "${target_paths[@]}"
do
    for viewport_width in "${viewport_widths[@]}"; do
        ./comparePages $target_path $viewport_width
    done 
done

echo -e "\n${bold_green}SUCCESS${default_color}: All tests passed!"